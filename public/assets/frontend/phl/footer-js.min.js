"use strict";var app;var spinnerModule;var splashModule;(function(angular){spinnerModule=angular.module('ngLoadingSpinner',['angularSpinner']);splashModule=angular.module('ui.splash',['ui.bootstrap']);app=angular.module('app',['ngRoute','ngAnimate','ngSanitize','ngLoadingSpinner','pascalprecht.translate','ngCookies','ui.splash',function($httpProvider){$httpProvider.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded;charset=utf-8';$httpProvider.defaults.headers.common['X-Requested-With']='XMLHttpRequest';$httpProvider.defaults.transformRequest=[function(data){if(data===undefined){data={};}
var token=$('meta[name=token]');app.value('token_id',token.attr('title'));app.value('token_val',token.attr('content'));data[token.attr('title')]=token.attr('content');return angular.isObject(data)&&String(data)!=='[object File]'?$.param(data):data;}];}]);app.service('Meta',function(){var metaDescription='';var metaKeywords='';return{metaDescription:function(){return metaDescription;},metaKeywords:function(){return metaKeywords;},reset:function(){metaDescription='';metaKeywords='';},setMetaDescription:function(newMetaDescription){metaDescription=newMetaDescription;},appendMetaKeywords:function(newKeywords){for(var key in newKeywords){if(metaKeywords===''){metaKeywords+=newKeywords[key].name;}else{metaKeywords+=', '+newKeywords[key].name;}}}};});app.run(['$rootScope','ROUTES','$translate','$cookies','Authentication','$http',function($rootScope,ROUTES,$translate,$cookies,Authentication,$http){$rootScope.ROUTES=ROUTES;if($cookies){$rootScope.currentLanguage=$cookies.NG_TRANSLATE_LANG_KEY||'ru';}
else{$rootScope.currentLanguage=store.get('NG_TRANSLATE_LANG_KEY')||'ru';}
$rootScope.$on('$translatePartialLoaderStructureChanged',function(){$translate.refresh();});$rootScope.$on("$locationChangeSuccess",function(event,next,current){if(!Authentication.isLoggedIn()){$http.defaults.headers.common['X-Token']=$cookies.token;}});}]);})(angular);;"use strict";(function(angular){app.constant('ROUTES',(function(){return{HOME:'/',CONTACTS:'/contacts',HELP:'/help',AGREEMENT:'/agreement',ABOUT:'/about',NOT_FOUND:'/error/notfound',ACCOUNT:'/account',VERIFY:'/sign/verify',LOGIN:'/sign/login',REGISTER:'/sign/register',RESTORE:'/sign/restore',LOGOUT:'/sign/logout'}})());app.constant('TEMPLATE',(function(){return{ARTICLE:'assets/frontend/phl/app/common/templates/index.html',ERROR:'assets/frontend/phl/app/common/templates/error.html',SIGN:'assets/frontend/phl/app/authenticate/templates/sign.html',ACCOUNT:'assets/frontend/phl/app/user/templates/account.html'}})());app.config(['$routeProvider','$locationProvider','ROUTES','TEMPLATE',function($routeProvider,$locationProvider,ROUTES,TEMPLATE){$locationProvider.hashPrefix('!');$locationProvider.html5Mode(true);$routeProvider.when(ROUTES.HOME,{templateUrl:TEMPLATE.ARTICLE,controller:"IndexCtrl"}).when(ROUTES.CONTACTS,{templateUrl:TEMPLATE.ARTICLE,controller:"IndexCtrl"}).when(ROUTES.HELP,{templateUrl:TEMPLATE.ARTICLE,controller:"IndexCtrl"}).when(ROUTES.AGREEMENT,{templateUrl:TEMPLATE.ARTICLE,controller:"IndexCtrl"}).when(ROUTES.ABOUT,{templateUrl:TEMPLATE.ARTICLE,controller:"IndexCtrl"})
$routeProvider.when(ROUTES.LOGOUT,{controller:"IndexCtrl",redirectTo:ROUTES.LOGOUT}).when(ROUTES.NOT_FOUND,{templateUrl:TEMPLATE.ERROR,controller:'IndexCtrl'}).when(ROUTES.ACCOUNT,{templateUrl:TEMPLATE.ACCOUNT,controller:"UserCtrl",caseInsensitiveMatch:true,resolve:{isAuthenticated:function(Authentication){Authentication.requestUser(ROUTES.VERIFY);}}}).when('/transactions/:name',{templateUrl:function(urlattr){return'assets/frontend/phl/app/transactions/templates/'+urlattr.name+'.html';},caseInsensitiveMatch:true,controller:"UserCtrl",resolve:{isAuthenticated:function(Authentication){Authentication.requestUser(ROUTES.VERIFY);}}}).otherwise({redirectTo:ROUTES.HOME});}]);app.config(['$translateProvider','$translatePartialLoaderProvider',function($translateProvider,$translatePartialLoader){$translateProvider.fallbackLanguage(['en','ru','de','uk']).determinePreferredLanguage().registerAvailableLanguageKeys(['en','de','ru','uk'],{'en_US':'en','en_GB':'en','de_DE':'de','ua_UK':'uk','ru-RU':'ru'});$translateProvider.useLoader('$translatePartialLoader',{urlTemplate:'assets/frontend/phl/app/languages/{lang}/{part}.json'});}]);})(angular);;"use strict";(function(){spinnerModule.directive('usSpinner',['$http','$rootScope',function($http,$rootScope){return{link:function(scope,elm,attrs)
{$rootScope.spinnerActive=false;scope.isLoading=function(){return $http.pendingRequests.length>0;};scope.$watch(scope.isLoading,function(loading)
{$rootScope.spinnerActive=loading;if(loading){elm.removeClass('ng-hide');}else{elm.addClass('ng-hide');}});}};}]);}).call(this);;'use strict';(function(angular){splashModule.service('$splash',['$modal','$rootScope','TEMPLATE',function($modal,$rootScope,TEMPLATE){var modalInstance;return{open:function(attrs,opts){var scope=$rootScope.$new();angular.extend(scope,attrs);opts=angular.extend(opts||{},{backdrop:false,scope:scope,templateUrl:TEMPLATE.SIGN,windowTemplateUrl:'splash/index.html'});modalInstance=$modal.open(opts);return modalInstance;},close:function(){return modalInstance.close();}};}]).run(['$templateCache',function($templateCache){$templateCache.put('splash/index.html','<section class="splash" ng-class="{\'splash-open\': animate}" ng-style="{\'z-index\': 1000, display: \'block\'}" ng-click="close($event)">'+'  <div class="splash-inner" ng-transclude></div>'+'</section>');}]);})(angular);;"use strict";(function(angular){app.controller('TopMenuCtrl',['$scope','$location','$translatePartialLoader','$splash','$http','$sce','$rootScope','$anchorScroll',function($scope,$location,$translatePartialLoader,$splash,$http,$sce,$rootScope,$anchorScroll){$translatePartialLoader.addPart('menu');$scope.isActive=function(route){if($location.hash()!=''){$anchorScroll();return route===$location.url()+'#'+$location.hash();}
return route===$location.url();}
$scope.openSplash=function(){$translatePartialLoader.addPart('sign');var token=$('meta[name=token]');$rootScope.token_id=token.attr('title');$rootScope.token_val=token.attr('content');$splash.open();};}]);})(angular);;"use strict";(function(angular){app.controller('LanguageCtrl',['$translate','$scope','$cookies',function($translate,$scope,$cookies){$scope.changeLanguage=function(langKey){$translate.use(langKey);if($cookies){$cookies.NG_TRANSLATE_LANG_KEY=langKey;}
else{store.set('NG_TRANSLATE_LANG_KEY',langKey);}
$scope.currentLanguage=langKey;};}]);})(angular);;"use strict";(function(angular){app.controller('IndexCtrl',['$scope','$rootScope','$http','$location','$sce','ROUTES',function($scope,$rootScope,$http,$location,$sce,ROUTES){$http.get($location.url()).success(function(data){$scope.trusty=function(){return $sce.trustAsHtml(data.content);}
$rootScope.title=data.title;$rootScope.topmenu=data.topmenu;}).error(function(){$location.url(ROUTES.NOT_FOUND);});}]);})(angular);;'use strict';(function(angular){app.service('Authentication',['$rootScope','$q','$http','$timeout','$cookies',function($rootScope,$q,$http,$timeout,$cookies){var isAuthenticated=false;var user=null;return{requestUser:function(route){var deferred=$q.defer();$http.get(route,{headers:{'X-Token':$cookies.token}}).success(function(response){if(response.success){$rootScope.user=user=response.user;$rootScope.isAuthenticated=isAuthenticated=true;}
deferred.resolve(user);}).error(function(error){deferred.reject(error);});return deferred.promise;},getUser:function(){return user;},isLoggedIn:function(){return(isAuthenticated)?true:false;},sign:function(credentials,route){var deferred=$q.defer();$http.post(route,credentials).success(function(response){if(response.success){$rootScope.user=user=response.user;$rootScope.isAuthenticated=isAuthenticated=true;$http.defaults.headers.common['X-Token']=$cookies.token;deferred.resolve(response);}
else{deferred.resolve(response);}}).error(function(error){deferred.reject(error);});return deferred.promise;},logout:function(route){var deferred=$q.defer();$http.delete(route,{headers:{'X-Token':''}}).success(function(response){if(response.success){$rootScope.user=user=null;$rootScope.isAuthenticated=isAuthenticated=false;$http.defaults.headers.common['X-Token']='';deferred.resolve(true);}
else{deferred.resolve(false);}}).error(function(error){deferred.reject(error);});return deferred.promise;}};}]);})(angular);;"use strict";(function(angular){app.controller('SignCtrl',['$scope','$rootScope','$location','Authentication','$translatePartialLoader','$splash','ROUTES',function($scope,$rootScope,$location,Authentication,$translatePartialLoader,$splash,ROUTES){$scope.loginForm=true;$scope.registerForm=false;$scope.remindForm=false;$scope.toggle=function(form){if(form==='loginForm'){$scope.registerForm=false;$scope.restoreForm=false;$scope.loginForm=true;}
else if(form==='restoreForm'){$scope.registerForm=false;$scope.restoreForm=true;$scope.loginForm=false;}
else{$scope.registerForm=true;$scope.restoreForm=false;$scope.loginForm=false;}};$scope.sign=function(){$scope.dataLoading=true;var credentials={'login':$scope.login,'password':$scope.password}
Authentication.sign(credentials,ROUTES.LOGIN).then(function(response){if(response.success){$splash.close();$location.path(ROUTES.ACCOUNT);}else{$scope.signError=response.message;$scope.dataLoading=false;}});};$scope.restore=function(){$scope.dataLoading=true;var credentials={'login':$scope.login}
Authentication.sign(credentials,ROUTES.RESTORE).then(function(response){if(response.success){$scope.restoreSuccess=response.message;$scope.dataLoading=false;setTimeout(function(){$splash.close();},3000);}else{$scope.restoreError=response.message;$scope.dataLoading=false;}});};$scope.register=function(){$scope.dataLoading=true;var credentials={'login':$scope.login,'name':$scope.name,'password':$scope.password}
Authentication.sign(credentials,ROUTES.REGISTER).then(function(response){if(response.success){$splash.close();$location.path(ROUTES.ACCOUNT);}else{$scope.registerError=response.message;$scope.dataLoading=false;}});};$scope.logout=function(){Authentication.logout(ROUTES.LOGOUT).then(function(response){if(response){$location.path(ROUTES.HOME);}});};$scope.checkPassword=function(){$scope.formRegister.passwordx.$error.dontMatch=$scope.password!==$scope.passwordx;};}]);})(angular);;"use strict";"use strict";(function(angular){app.controller('UserCtrl',['$scope','$rootScope','$http','$location','ROUTES','$cookies',function($scope,$rootScope,$http,$location,ROUTES,$cookies){$http.get($location.url(),{headers:{'X-Token':$cookies.token}}).success(function(data){$rootScope.title=data.title;$rootScope.user=data.user;}).error(function(){$location.url(ROUTES.NOT_FOUND);});}]);})(angular);;
$.fn.megamenu=function(e){function r(){$(".megamenu").find("li, a").unbind();if(window.innerWidth<=768){o();s();if(n==0){$(".megamenu > li:not(.showhide)").hide(0)}}else{u();i()}}function i(){$(".megamenu li").bind("mouseover",function(){$(this).children(".dropdown, .megapanel").stop().fadeIn(t.interval)}).bind("mouseleave",function(){$(this).children(".dropdown, .megapanel").stop().fadeOut(t.interval)})}function s(){$(".megamenu > li > a").bind("click",function(e){if($(this).siblings(".dropdown, .megapanel").css("display")=="none"){$(this).siblings(".dropdown, .megapanel").slideDown(t.interval);$(this).siblings(".dropdown").find("ul").slideDown(t.interval);n=1}else{$(this).siblings(".dropdown, .megapanel").slideUp(t.interval)}})}function o(){$(".megamenu > li.showhide").show(0);$(".megamenu > li.showhide").bind("click",function(){if($(".megamenu > li").is(":hidden")){$(".megamenu > li").slideDown(300)}else{$(".megamenu > li:not(.showhide)").slideUp(300);$(".megamenu > li.showhide").show(0)}})}function u(){$(".megamenu > li").show(0);$(".megamenu > li.showhide").hide(0)}var t={interval:250};var n=0;$(".megamenu").prepend("<li class='showhide'><span class='title'>MENU</span><span class='icon1'></span><span class='icon2'></span></li>");r();$(window).resize(function(){r()})};
(function($){$.fn.UItoTop=function(options){var defaults={text:'To Top',min:200,inDelay:600,outDelay:400,containerID:'toTop',containerHoverID:'toTopHover',scrollSpeed:1200,easingType:'linear'},settings=$.extend(defaults,options),containerIDhash='#'+settings.containerID,containerHoverIDHash='#'+settings.containerHoverID;$('body').append('<a href="#" id="'+settings.containerID+'">'+settings.text+'</a>');$(containerIDhash).hide().on('click.UItoTop',function(){$('html, body').animate({scrollTop:0},settings.scrollSpeed,settings.easingType);$('#'+settings.containerHoverID,this).stop().animate({'opacity':0},settings.inDelay,settings.easingType);return false;}).prepend('<span id="'+settings.containerHoverID+'"></span>').hover(function(){$(containerHoverIDHash,this).stop().animate({'opacity':1},600,'linear');},function(){$(containerHoverIDHash,this).stop().animate({'opacity':0},700,'linear');});$(window).scroll(function(){var sd=$(window).scrollTop();if(typeof document.body.style.maxHeight==="undefined"){$(containerIDhash).css({'position':'absolute','top':sd+$(window).height()-50});}
if(sd>settings.min)
$(containerIDhash).fadeIn(settings.inDelay);else
$(containerIDhash).fadeOut(settings.Outdelay);});};})(jQuery);;
jQuery.extend(jQuery.easing,{easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10* --t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});;
$(document).ready(function(){$(".dropdown img.flag").addClass("flagvisibility");$(".dropdown dt a").click(function(){$(".dropdown dd ul").toggle();});$(".dropdown dd ul li a").click(function(){var text=$(this).html();$(".dropdown dt a span").html(text);$(".dropdown dd ul").hide();$("#result").html("Selected value is: "+getSelectedValue("sample"));});function getSelectedValue(id){return $("#"+id).find("dt a span.value").html();}
$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass("dropdown"))
$(".dropdown dd ul").hide();});$("#flagSwitcher").click(function(){$(".dropdown img.flag").toggleClass("flagvisibility");});$(".megamenu").megamenu();var defaults={containerID:'toTop',containerHoverID:'toTopHover',scrollSpeed:1200,easingType:'linear'};$().UItoTop({easingType:'easeOutQuart'});$(".scroll").click(function(event){event.preventDefault();$('html,body').animate({scrollTop:$(this.hash).offset().top},1200);});});;